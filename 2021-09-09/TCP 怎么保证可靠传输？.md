## TCP 怎么保证可靠传输？
TCP主要通过以下几点保证可靠传输：

- 确认重传：超过一定时间没有收到确认，发送方会重传数据报文。
- 数据分片和排序：接收方会缓存乱序到达的数据包，排序后传给应用层。
- 检验和：TCP会传输首部和数据的校验和，如果收到的校验和有差错，接收方会丢弃和不确认这个报文。
- 流量控制：接收方处理速度跟不上时，会提示发送方降低发送速率（缩小窗口大小并把缩小后的值传给发送方），防止包丢失。
- 拥塞控制：网络拥塞时，减少数据发送。

### 数据分片和排序
ARQ(Automatic Repeat Request)自动重传协议分为停止等待ARQ和连续ARQ，比起每发一个分组就要停下来等待确认的停止等待ARQ，连续ARQ的效率更高：

- 发送方维持一个发送窗口，窗口内的分组都可以连续发送而不用等待确认。
- 采用累积确认，对**按序**到达的最后一个分组发送确认。
- 只能确定：收到确认的分组以及之前的数据顺利送达。对于确认分组之后的数据，可能送达也可能没送达，只能统一重传处理。