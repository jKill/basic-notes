## Redis 管道、事务和 lua 脚本的区别
### 管道

- 管道用于将多个命令一次性发到 Redis 执行，较少网络交互次数。
- 无法保证原子性。

### 事务

- 与管道一样，事务同样可以实现命令批处理，但除此之外还能保证原子性。
- 与关系型数据库不同，Redis 的事务无法回滚。
- Redis 事务在命令错误时，后面的指令无法执行。但如果仅仅是参数错误，后面的指令不会收到影响。

### lua 脚本

- lua 脚本兼具批处理和原子性的优点。
- 此外 lua 脚本还能根据部分命令的返回结果进行逻辑判断，做出不同的处理。

场景：

- 业务场景需要根据部分命令的结果做出不同的处理。
- 在 Redis 服务端做判断和处理的同时需要保证原子性。