## 进程和线程之间有什么区别？
进程是程序运行后产生的，每个进程都有独立的虚拟地址空间，可执行代码，安全上下文，唯一的进程标识，环境变量，至少一个执行中的线程。每个进程创建时都有会有一个初始线程（primary thread）。

线程则是进程中一个可以调度和执行的单位，一个进程内的所有线程共享这个进程的私有地址空间和系统资源。每个线程有自己的异常处理器，调度优先级，线程本地存储，唯一的线程标识和一系列保存线程上下文的结构体。线程上下文包括线程拥有的寄存器，内核栈，用户栈，线程环境块（thread environment block）。

线程和进程之间最明显的区别是每个进程拥有独立的内存地址，而同一个进程内的线程都共享这个进程的内存空间。此外，还有以下区别：

进程

- 进程相比线程比较”重“，无论是创建，终止，还是进程间通信，上下文切换，都比线程慢。
- 使用 IPC(Inter-Process Communication) 机制进行通信，增加了系统调用的次数。
- 每个进程的创建需要单独的系统调用。
- 进程管理需要更多地系统调用次数。
- 进程有自己的堆、栈内存和数据集，互相之间不共享数据。

线程：

- 线程更轻量级，创建、终止线程，线程间通信，线程上下文切换，都比进程快。
- 同一个进程内的线程之间，通过共享内存通信。
- 一次系统调用能创建多个线程。
- 线程管理基本不需要系统调用，因为线程间通信可以通过共享的内存进行。
- 线程共享堆空间，但有自己的栈空间和寄存器。