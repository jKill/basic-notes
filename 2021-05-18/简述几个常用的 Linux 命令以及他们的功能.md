## 简述几个常用的 Linux 命令以及他们的功能
### Top命令
Top提供了一个可以实时显示系统运行信息的交互式窗口，我们可以在上面方便地查看当前运行的进程和系统资源使用情况。各个版本的top指令展示可能会有点不同，但基本包含以下信息：

- 系统负载（load average）：系统负载：即任务队列的平均长度
- CPU使用情况：使用率，闲置率等数据。
- 内存使用情况：总共，已使用，闲置内存，缓冲区等数据
- 进程详情：进程id，所属用户，占用CPU百分比，占用内存百分比，运行时间等等。

其中CPU一栏相关数据：

- us：执行用户空间运行的进程（未设置优先级）上的CPU时间
- sy：执行内核空间运行的进程上的CPU时间
- ni：执行设置了优先级的进程的CPU时间
- id：CPU闲置时间
- wa：CPU等待IO完成的时间
- hi：CPU处理硬件中断上的时间
- si：CPU处理软件中断上的时间
- st：由于运行虚拟机损失的CPU时间（steal time）

#### 常见用法

- 数字"1"：进入top界面后，按数字1可以监控每个逻辑CPU的状况。
- 排序：进程列表默认按CPU字段排序，可以通过P（CPU）、M（内存）、N（PID）、T（运行时间）等修改排序字段。
- "u"：按"u"后，输入用户名或者UID，可以只查看输入用户相关的进程列表。
- "I"：只查看活跃任务，列表只展示消耗CPU时间的进程。
- "r"：改变进程的优先级。
- "k"：杀掉进程。这个指令会发送SIGTERM (kill) 信号。

### Ping
Ping （Packet Internet Groper）是一种因特网包探索器，用于测试网络连接量的程序。Ping是工作在 TCP/IP网络体系结构中应用层的一个服务命令， 主要是向特定的目的主机发送 ICMP（Internet Control Message Protocol 因特网报文控制协议）Echo 请求报文，测试目的站是否可达及了解其有关状态。

有以下作用：

- 确定IP地址是否存在；
- 确定目标主机是否正常运行；
- 请求的往返时延rtt（round-trip time）
- 是否存在丢包

使用Ping定位的四个步骤：

- Ping 127.0.0.1
- Ping 本地IP地址
- Ping 默认网关
- Ping 远程服务器

第一步是为了确认IP栈（IP Stack）是否成功初始化；第二步是为了确认网络接口控制器（也叫网卡）NIC(Network Interface Card)是否正常工作；第三步是确认本机能否连上局域网；第四步是确认本地能否与远程服务器正常通信。

#### 使用场景

- 在部署一个新的服务时，为了测试这个服务能否正常与所在系统内的其他服务通信，会在其所在服务器Ping目标服务器。
- Redis主从服务器、哨兵之间的心跳检测，是通过持续的Ping实现的。

#### 类似Ping的命令：Traceroute
Traceroute 命令是通过发送ICMP 数据包来展示从请求发起端到接收端的路由路径相关信息的工具。请求途径的ip，域名，对应的TTL和时延都会展示出来

### Dig
dig主要用来向域名服务器（DNS）查询主机的地址信息。典型用法有```dig baidu.com```

输出信息大致分为五部分：

- 第一部分是dig的版本和输入参数。
- 第二部分主要是服务返回的技术详情，status表示查询结果，为NOERROR说明本次查询成功。
- 第三部分的“QUESTION SECTION”为我们要查询的域名。
- 第四部分的“ANSWER SECTION”是查询结果。
- 第五部分是一些统计信息，查询耗时，查询了哪个DNS服务器，在什么时间进行查询等

#### 查询特定的记录类型
默认情况下dig查询A记录。

|类型|目的|
|:--|:--|
|A|地址记录，用来指定域名的 IPv4 地址，如果需要将域名指向一个 IP 地址，就需要添加 A 记录。|
|AAAA|用来指定主机名(或域名)对应的 IPv6 地址记录。|
|CNAME|如果需要将域名指向另一个域名，再由另一个域名提供 ip 地址，就需要添加 CNAME 记录。|
|MX|如果需要设置邮箱，让邮箱能够收到邮件，需要添加 MX 记录。|
|NS|域名服务器记录，如果需要把子域名交给其他 DNS 服务器解析，就需要添加 NS 记录。|
|SOA|SOA 这种记录是所有区域性文件中的强制性记录。它必须是一个文件中的第一个记录。|
|TXT| 可以写任何东西，长度限制为 255。绝大多数的 TXT记录是用来做 SPF 记录(反垃圾邮件)。 |

如果要查询特定类型的记录，如CNAME：

``` dig baidu.com CNAME```

#### 从指定的DNS服务器上查询
有时从默认的DNS查询到的结果不准确，希望换一个DNS服务器，如8.8.8.8进行查询，使用@符号：

``` dig @8.8.8.8 baidu.com```

如不指定的话，默认使用/etc/resolv.conf里的地址。

#### 反向查询
如果想知道某个DNS服务器的信息，如前面使用的8.8.8.8，可以使用dig的-x参数反向解析IP地址对应的域名。如：

```dig -x 8.8.8.8 + short```

+short 用来使输出信息更简洁，dig默认输出的是详细信息。

#### 查看TTL（Time to Live）
dig输出信息已经包含TTL了，但是不够精简，可以通过以下命令，更方便查看TTL
``` dig +nocmd +noall +answer +ttlid baidu.com ```

#### 跟踪查询过程
+trace 参数可以输出从根域到最终结果的所有信息：

``` dig +trace baidu.com ```