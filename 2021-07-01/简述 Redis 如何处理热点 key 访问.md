## Redis 如何处理热key问题
### 发现热key

- 使用Redis的热key分析功能，会遍历Redis实例的所有key，不能在业务高峰期用。
- 针对业务特点预测热key(如活动期间折扣大的商品)。简单，但是会遗漏热key。
- 客户端收集数据统计。实现简单，但是对代码有入侵。
- 在代理层收集数据统计。对客户端透明，不入侵代码；但是开发成本较高，而且不是所有Redis集群架构都有Proxy层。

### 解决热key

- 使用本地缓存。本地缓存可以降低对redis的访问，但也带来了两个问题：1、本地缓存的空间消耗；2、需要考虑本地缓存如何与redis缓存有效期的一致；3、需要提前预测热key，并且有可能遗漏一些热key。
- 使用分片算法，打散热key(如对热key加后缀key\_1，key\_2...key_n)。写完热key之后，对热key复制多份写到多个redis实例中，并且过期时间设为热key的过期时间加一个随机数，防止同时失效引起**缓存雪崩**。